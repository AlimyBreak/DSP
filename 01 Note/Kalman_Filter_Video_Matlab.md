视频来源:(Matlab 官方)
```C
/*
链接：https://pan.baidu.com/s/1YtFgZUrheSF8m4UC2xYn1Q 
提取码：aq0f 
复制这段内容后打开百度网盘手机App，操作更方便哦
*/
```

# video01

+ what 's “Kalman Filter”?
  + A Kalman Filter is an optimal estimation algorithm.
  + 是一种优化估算算法.
  + 是一种设计最优状态观测器的方法.
+ 用途:
  + 例子1：估算系统状态,当它无法直接被测量时,可以间接测量来估计.
    + 火箭发动机燃烧室的内部温度非常高，没有传感器能够直接测量，但是燃烧温度过高，会烧毁火箭的关键部件，需要估计无法直接测量的物理量, 需要根据其他外部部位的温度来估算火箭发动机内部燃烧的温度.
  + 例子2：利用组合各种可能受噪声影响的数据源，使用卡尔曼滤波器来估算系统的状态.
    + 汽车导航系统需要知道当前位置的信息来源有：__惯性测量单元__(IMU,板上传感器,Onboard Sensors),包含加速度传感器和陀螺仪,__里程表__可以反映汽车行驶的相对距离;__GPS__接收卫星传来的信息.
    + 当车辆行驶到隧道内部时，GPS信号微弱(weak)或受到干扰，我们很难用GPS来估计位置.
    + 此时，我们就需要用IMU提供的信息，为我们估算位置信息.
      + 加速度本身不告诉我们骑汽车的位置，我们可以对加速度进行二次积分得到估算里程，但误差会随着时间不短累积；
      + 里程表读数也可能受到轮胎压力和道路状况的影响；
      + IMU可以测量汽车的相对位置，可以快速更新，但是很容产生漂移；
      + GPS提供绝对位置，但是信号更新很慢，而且很可能有噪音.
      + 我们需要结合三个测量值，得到汽车最合适的估算位置。
  + 常见应用场合:
    + 制导与导航控制系统(guidance and navigation systems)
    + 计算机视觉系统(computer vision systems) 
    + 信号处理(signal processing)





***

# video02

## 状态观测器(State Observers)

+ 给系统一个输入，通过观察系统的输出，来估计无法直接查看或测量的内容。

+ 状态观测器得到的估计状态用小帽子来表示：$\hat{X}$,(Estimated state)

+ 以火箭为例:内部温度$T_{in}$无法直接测量，外部温度$T_{ext}$可以测量得到，宇航系统可以通过测量$T_{ext}$和燃油流量来估算$T_{in}$.

+ 通过燃油流量的数学模型(Mathematical model)，我们可以得到估计的输出$\hat{T}_{ext}$和$\hat{T}_{in}$,完美的数学模型达到非常困难，还要初始条件一致，往往股计算的外部温度并不能吻合测量的温度.

+ 如果估计的外部温度能与测量的外部温度吻合($\hat{T}_{ext} \to T_{ext}$)，那么表示模型收敛到了真实系统；那么估算的内部温度也能收敛到真实的内部温度($\hat{T}_{in} \to T_{in}$)。

+ 我们尝试消除估算和测量外部温度之间的误差$e=error=T_{ext}-\hat{T}{ext}$，来反馈控制数学模型中对外部温度和内部温度的估算.

+ 通过观测器机器控制器$K$形成的闭环，问题在于如何选择控制增益$K$,使得测量和估算外部温度之间的误差最小化.

+ 状态观测器的数学方式表示：

  ![V02_01](Kalman_Filter_Video.assets/V02_01.jpg)

  + 若输入为$u$,输出为$y$,我们需要估计$\hat{x}$以让它逼近$x$.
  
  + 对于观测误差:
    $$
    e_{obs}=x-\hat{x}
    $$
    
  + 我们可以得到系统的方程
    $$
    \begin{eqnarray}
    \dot{x}&=&Ax+Bu\\
    y&=&Cx
    \end{eqnarray}
    $$
    
  + 和观测器的方程
    $$
    \begin{eqnarray}
    \dot{\hat{x}}&=&A\hat{x}+Bu + K(y-\hat{y})\\
    \hat{y}&=&C\hat{x}
    \end{eqnarray}
    $$
    
  + 根据系统的方程和观测器的方程做差可以得到
    $$
    \begin{eqnarray}
    \dot{x}-\dot{\hat{x}}&=&Ax-A\hat{x}+Bu-Bu-K(y-\hat{y})\\
    &=&Ax-A\hat{x}-K(y-\hat{y})\\
    \dot{e}_{obs}&=&Ae_{obs}+KC(x-\hat{x})\\
    &=&(A-KC)e_{obs}
    \end{eqnarray}
    $$
  
  + 方程$(9)$的解是指数函数
    $$
    e_{obs}(t)=e^{(A-KC)t}e_{obs}(t)
    $$
    当$(A-KC)<0$,则$t\to +\infty$时，$e_{obs}\to 0$,则$\hat{x}\to x$.
  
    即便没有$KC$项，当$A<0$，依然有此结论.
  + 给观测器建立反馈回路的重要性在于,我们可以控制误差函数的衰减率(通过选择相应的控制器增益K),而不仅仅是通过矩阵$A$,因为我们无法找到真的矩阵$A$.
  
    

# Video03

+ 例子:自动驾驶大赛.

  + 均值靠近终点，方差尽量小，不能完全按照GPS的信息进行驾驶.

  + 需要使用卡尔曼滤波器来估算汽车的位置.

  + 输入时汽车的油门$u_k$,输出是我们感兴趣的汽车的位置$y_k$,$v_k$表示GPS的噪音，这是一个随机变量,$w_k$表示过程噪声，可以代表风的影响或汽车速度的变化.
    $$
    \begin{eqnarray}
    x_k&=&Ax_{k-1}+Bu_k\\
    y_k&=&Cx_k + v_k
    \end{eqnarray}
    $$

  + 假设$V$服从具有零均值和协方差矩阵$R=\sigma^2_v$的高斯分布,同样过程噪声也服从具有零均值和协方差矩阵$R=\sigma_w^2$的高斯分布.
    $$
    \begin{eqnarray}
    v&\sim{}&N{(0,R)}\\
    w&\sim{}&N{(0,Q)}
    \end{eqnarray}
    $$

  + 实际上我们的测量也不能完全反映汽车的真实位置，我们可以运用数学模型来估算位置
    $$
    \begin{eqnarray}
    \hat{x}_{k}&=&A\hat{x}_{k-1}+Bu_k\\
    \hat{y}_k&=&C\hat{x}_k
    \end{eqnarray}
    $$
    

  

